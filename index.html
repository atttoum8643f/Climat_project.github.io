<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Météo_project</title>


<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>

    <header> 
        <h1> Application météorologique pour Montpellier</h1>
    </header>

    <div class="flexbox">
        <ul>
            <li><img src="./outils/Images/meteo.png" alt="meteo" height="100%" width="100%"></li>
        
           <p>Nous allons, créer tout au long de ce projet une application météorologique.
            Cette application affichera les prévisions météorologiques des jours à venir à Montpellier.
            Cependant, pour y parvenir nous avons séparé le travail en trois thème principale,
            la première partie consisté à crée le site et de faire en sorte qu’elle soit fonctionnelle.
            La seconde partie, nous allons créer voir une carte interactive de la ville de Montpellier 
            en fonction d’une couleur pour caractériser les différents aspects de la météo.
            De ce fait nous aurrons à télécharger des données via un site météorologique. 
            Enfin, nous allons mettre en relation et fusionné tout nos données et probablement
            un code qu’on aura mis en place afin de créer l’application.
           </p>
        <ul>
    </div>

    <p> Dans un premier temps, nous allons télécharger les données en écrivant un code python et
        en utilisant le package requests et en seconde temps nous allons utilisée les données télécharger
        afin de créer un tableau de bors affichant les température actuelle et celle à venir, l'humidité, les Précipitations etc...

        Enfin, nous esseyerons de faire en sorte que les données se mette à jour automatiquement en modiffiant le code html et en 
        ajoutant une clef API pour faire une requête dans le site open-meteo. 
        Nous utiliserons également un code qu'on a trouver dans le site "weatherstack" un site fournissant
        des cles API afin d'obtenir des données météorologiques comme "open-meteo".
      </p>

      <h2>Données passés en fonction d'une ville particulière</h2>
      <table>
          <tr>
              <th>Location ID</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Lieu</th>
              <th>Temperature (°C)</th>
              <th>Relative Humidity (%)</th>
          </tr>
          <tr>
              <td>0</td>
              <td>43.58</td>
              <td>3.96</td>
              <td>Montpellier</td>
              <td>19.2</td>
              <td>90</td>
          </tr>
          <tr>
              <td>1</td>
              <td>43.62</td>
              <td>3.82</td>
              <td>Juvignac</td>
              <td>18.6</td>
              <td>91</td>
          </tr>
          <tr>
              <td>2</td>
              <td>43.56</td>
              <td>3.90</td>
              <td>Lattes</td>
              <td>19.2</td>
              <td>90</td>
          </tr>
          <tr>
              <td>3</td>
              <td>43.56</td>
              <td>3.96</td>
              <td>Pérols</td>
              <td>19.4</td>
              <td>90</td>
          </tr>
      </table>

      <p>
        Les viles étant dans la même région on peut constater que les données météorologiques sont assez proche.
      </p>


      <h2>Prévisions des température max et min pour les Prochains Jours</h2>
    <table>
        <tr>
            <th>Date</th>
            <th>Temperature Maximale (°C)</th>
            <th>Temperature Minimale (°C)</th>
        </tr>
        <tr>
            <td>2023-11-10</td>
            <td>15.4</td>
            <td>9.2</td>
        </tr>
        <tr>
            <td>2023-11-11</td>
            <td>15.3</td>
            <td>8.0</td>
        </tr>
        <tr>
            <td>2023-11-12</td>
            <td>18.4</td>
            <td>9.0</td>
        </tr>
        <tr>
            <td>2023-11-13</td>
            <td>17.5</td>
            <td>14.7</td>
        </tr>
        <tr>
            <td>2023-11-14</td>
            <td>21.4</td>
            <td>16.7</td>
        </tr>
        <tr>
            <td>2023-11-15</td>
            <td>20.5</td>
            <td>12.5</td>
        </tr>
        <tr>
            <td>2023-11-16</td>
            <td>14.1</td>
            <td>7.6</td>
        </tr>
        <tr>
            <td>2023-11-17</td>
            <td>13.5</td>
            <td>7.4</td>
        </tr>
        <!-- On peut ajouter d'autres lignes pour les jours passés -->
    </table>


    <h2> Ma carte interactive centrée sur montpellier</h2>
    <div class="flexbox">
        
        <div id="map" style="height: 320px; width: 99%;"></div>
        <script>
            // Création de la carte
            var maCarte = L.map('map').setView([43.61, 3.88], 10);
    
            // Définition du fond de carte (utilisation de OpenStreetMap)
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                maxZoom: 19,
            }).addTo(maCarte);
    
            // Ajouter les marqueurs
            L.marker([43.61, 3.88]).addTo(maCarte).bindPopup('Montpellier');
    
            L.marker([43.62, 3.82]).addTo(maCarte)
                .bindPopup('Juvignac');
    
            L.marker([43.56, 3.90]).addTo(maCarte)
                .bindPopup('Lattes');
    
            L.marker([43.56, 3.96]).addTo(maCarte)
                .bindPopup('Pérols');
    
            L.marker([43.58, 3.96]).addTo(myMap)
                .bindPopup('AéroportMontpellier');
            // On pout ajouter autant de marqueurs que nécessaire
        </script>    

    </div>


    <main>   
        <div class="dashboard">
            <h2>Résultats pour 34070 Montpellier</h2>
    
           
            <div class="current-weather">
                <p class="sunny">Météo actuelle</p>
                <p id="temperature">16°C</p>
                <p id="precipitation">Précipitations : 80%</p>
                <p id="humidity">Humidité : 70%</p>
                <p id="wind">Vent : 35 km/h</p>
            </div>

    
        <script>
            // Fonction pour récupérer les données météorologiques depuis l'API
            function getWeatherData() {
                const apiUrl = "https://api.open-meteo.com/v1/forecast?latitude=43.6109&longitude=3.8763&current=temperature_2m,relativehumidity_2m,apparent_temperature,precipitation&hourly=temperature_2m,relativehumidity_2m,apparent_temperature,precipitation&daily=temperature_2m_max,temperature_2m_min&timezone=auto&forecast_days=16";
    
                // On effectue un appel API pour récupérer les données afin de mettre à jour le tableau de bord
                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        // On met à jour le tableau de bord avec les nouvelles données
                        updateDashboard(data);
                    })
                    .catch(error => {
                        console.error("Erreur lors de la récupération des données météorologiques : ", error);
                    });
            }
    
            // Fonction pour mettre à jour le tableau de bord avec de nouvelles données
            function updateDashboard(weatherData) {
                const temperatureElement = document.getElementById('temperature');
                const precipitationElement = document.getElementById('precipitation');
                const humidityElement = document.getElementById('humidity');
                const windElement = document.getElementById('wind');
    
                // Mettre à jour les éléments avec les nouvelles données
                temperatureElement.textContent = weatherData.current.temperature_2m + "°C";
                precipitationElement.textContent = "Précipitations : " + weatherData.current.precipitation + "%";
                humidityElement.textContent = "Humidité : " + weatherData.current.relativehumidity_2m + "%";
                windElement.textContent = "Vent : " + weatherData.current.apparent_temperature + " km/h";
            }
    
            // Appel initial pour obtenir les données
            getWeatherData();
    
            // Actualisation des données toutes les 1 heures (3600000 millisecondes)
            setInterval(getWeatherData, 3600000);
        </script> 




</main>


<p>
    Au cours de ce projet, nous avons pû réaliser differente recherche concernant la Création d'une application météorologique.
    Suite à ses recherche nous avons alors mise en place une méthode de travaille afin de répondre
    à differente problématique qu'on s'est poser.
</p>

  
   
        <table class="forecast-table">
            <tr>
                <th>Météo</th>
                <th>jeudi <li><img src="./outils/Images/soleil.png" alt="image" height="60%" width="60%"></li></th>
                <th>ven <li><img src="./outils/Images/averse.png" alt="FDS" height="60%" width="60%"></li></th>
                <th>sam <li><img src="./outils/Images/soleilnuage.png" alt="FDS" height="60%" width="60%"></li></th>
                <th>dim <li><img src="./outils/Images/pluie.png" alt="FDS" height="60%" width="60%"></li></th>
                <th>lun <li><img src="./outils/Images/averse.png" alt="FDS" height="60%" width="60%"></li> </th>
                <th>mar <li><img src="./outils/Images/pluie.png" alt="FDS" height="60%" width="60%"></li> </th>
                <th>mer <li><img src="./outils/Images/soleil.png" alt="FDS" height="60%" width="60%"></li></th>
            
            </tr>
        
            <tr>
                <th>Température</th>
                <td>16 °C</td>
                <td>14 °C</td>
                <td>16 °C</td>
                <td>18 °C</td>
                <td>17 °C</td>
                <td>17 °C</td>
                <td>17 °C</td>
            </tr>
            <tr>
                <th>Précipitations</th>
                <td>80%</td>
                <td>60%</td>
                <td>70%</td>
                <td>20%</td>
                <td>10%</td>
                <td>10%</td>
                <td>30%</td>
            </tr>
            <tr>
                <th>Vent</th>
                <td>35 km/h</td>
                <td>30 km/h</td>
                <td>40 km/h</td>
                <td>25 km/h</td>
                <td>20 km/h</td>
                <td>22 km/h</td>
                <td>18 km/h</td>
            </tr>
        </table>
    </div> 

    <script>
         function updateDashboard(data) {
                // Sélectionnez le tableau
                var table = document.querySelector('.forecast-table');
            
                // Créez les nouvelles lignes du tableau
                var newRow1 = document.createElement('tr');
                var newRow2 = document.createElement('tr');
                var newRow3 = document.createElement('tr');
                var newRow4 = document.createElement('tr');
            
                // Mettez à jour les données pour chaque jour
                for (var i = 0; i < data.daily.length; i++) {
                    var newCell1 = document.createElement('td');
                    newCell1.textContent = data.daily[i].weather;
                    newRow1.appendChild(newCell1);
            
                    var newCell2 = document.createElement('td');
                    newCell2.textContent = data.daily[i].temperature + ' °C';
                    newRow2.appendChild(newCell2);
            
                    var newCell3 = document.createElement('td');
                    newCell3.textContent = data.daily[i].precipitation + '%';
                    newRow3.appendChild(newCell3);
            
                    var newCell4 = document.createElement('td');
                    newCell4.textContent = data.daily[i].wind + ' km/h';
                    newRow4.appendChild(newCell4);
                }
            
                // Ajoutez les nouvelles lignes au tableau
                table.appendChild(newRow1);
                table.appendChild(newRow2);
                table.appendChild(newRow3);
                table.appendChild(newRow4);
            }
            setInterval(getWeatherData, 180000);
            // Appeler getWeatherData au chargement de la page
            window.onload = getWeatherData;
    </script>


    <div class="grid">
        <!-- <h2>Grid</h2> -->
        <!-- des élément qui contients déautres choses -->
        <div class="grid-container">
            <img src="./outils/Images/FDS.png" alt="logo_FDS">

            <form action="">
                <input type="text"  id="firstname"
                placeholder="Prénom"  >
                <input type="text"  id="surname"
                placeholder="Nom"  >
                <textarea cols="30" rows="10" placeholder="Ici votre message"></textarea>
                <input type="submit" value="Valider" id="bton-submit">
            </form>
        </div>
    </div>  

</body>
</html>